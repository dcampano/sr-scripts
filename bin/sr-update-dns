#!/usr/bin/env ruby

require 'rubygems'
require 'fog'

sdb = Fog::AWS::SimpleDB.new()

domain = "dns_info"
dns_alias = ARGV[0] 
ip_address = ARGV[1]



if /^(\d{1,3}\.){3}\d{1,3}$/.match(ip_address) == nil
	p "Usage: sr-update-dns hostname ip_address"
	exit
end

sdb.put_attributes(domain, dns_alias, { "ip_address" => ip_address }, { :replace => "ip_address" })
