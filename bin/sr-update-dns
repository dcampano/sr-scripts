#!/usr/bin/env ruby

require 'rubygems'
$:.unshift(File.join(File.dirname(__FILE__), "..", "lib"))
require 'fog'
require 'sr-scripts'

sdb = SrScripts::SimpleDB.get

domain = "dns_info"
dns_alias = ARGV[0] 
ip_address = ARGV[1]



if /^(\d{1,3}\.){3}\d{1,3}$/.match(ip_address) == nil
	p "Usage: sr-update-dns hostname ip_address"
	exit
end

sdb.put_attributes(domain, dns_alias, { "ip_address" => ip_address }, { :replace => "ip_address" })
